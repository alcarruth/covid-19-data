// Generated by CoffeeScript 2.5.1
(function() {
  //!/usr/bin/env coffee

  var Covid_19_Data, Covid_19_Data_View, Style_Manager, csse_covid_19_data, csv, fetch, per_million, population_data, sortable_table;

  if (typeof window !== "undefined" && window !== null) {
    fetch = window.fetch;
  } else {
    fetch = require('node-fetch');
    csv = require('csvtojson');
    population_data = require('./js/populations.json');
    csse_covid_19_data = require('./csse_covid_19_data');
    sortable_table = require('sortable_table');
  }

  per_million = function(x, y) {
    if (y !== 0) {
      return Number((1000000 * x / y).toFixed());
    }
  };

  Style_Manager = class Style_Manager {
    constructor() {
      this.set_style = this.set_style.bind(this);
      this.toggle_style = this.toggle_style.bind(this);
      this.current_style = 'dark';
      this.styles = {
        light: document.getElementById('light-style'),
        dark: document.getElementById('dark-style')
      };
    }

    set_style(name) {
      var style;
      style = this.styles[name];
      document.head.appendChild(style);
      return this.current_style = name;
    }

    toggle_style() {
      var name;
      name = {
        light: 'dark',
        dark: 'light'
      }[this.current_style];
      return this.set_style(name);
    }

  };

  Covid_19_Data = class Covid_19_Data {
    constructor(spec) {
      // call after document loaded
      this.init = this.init.bind(this);
      this.merge_data = this.merge_data.bind(this);
      this.add_view = this.add_view.bind(this);
      this.id = spec.id;
      this.date = spec.date;
      this.main_column = spec.main_column;
      this.covid_19_data = spec.covid_19_data;
      this.population_data = spec.population_data;
      this.data = this.merge_data();
      this.views = [];
    }

    init() {
      return this.add_view(this.data);
    }

    merge_data() {
      var cases, cases_per_million, data, deaths, deaths_per_cent, deaths_per_million, name, obj, population, rank, ref, row;
      data = [];
      rank = 1;
      ref = this.covid_19_data;
      for (name in ref) {
        obj = ref[name];
        population = this.population_data[name];
        if (population && population > 1000000) {
          cases = obj.cases;
          cases_per_million = per_million(cases, population);
          deaths = obj.deaths;
          deaths_per_million = per_million(deaths, population);
          deaths_per_cent = (100 * deaths / cases).toFixed();
          row = {
            rank: rank++,
            population: population,
            cases: cases,
            cases_per_million: cases_per_million,
            deaths: deaths,
            deaths_per_million: deaths_per_million,
            deaths_per_cent: deaths_per_cent
          };
          row[this.main_column.key] = name;
          data.push(row);
        }
      }
      return data;
    }

    add_view(parent_elt) {
      var view, view_id;
      view_id = `view_${this.views.length}`;
      view = new Covid_19_Data_View(this, view_id);
      parent_elt.appendChild(view.elt);
      return this.views.push(view);
    }

  };

  Covid_19_Data_View = class Covid_19_Data_View {
    constructor(parent, id) {
      var columns;
      this.parent = parent;
      this.id = id;
      this.elt_id = `${this.id}-iew_`;
      this.elt = document.createElement('div');
      this.elt.setAttribute('id', this.elt_id);
      this.elt.setAttribute('class', 'covid-19-data-view');
      this.style_manager = new Style_Manager();
      this.h1_elt = document.createElement('h1');
      this.h1_elt.innerText = `Covid_19_Data_View - ${this.parent.main_column.name}`;
      this.elt.appendChild(this.h1_elt);
      this.date_elt = document.createElement('p');
      this.date_elt.innerText = `${this.parent.date}`;
      this.elt.appendChild(this.date_elt);
      this.toggle_button = document.createElement('button');
      this.toggle_button.setAttribute('id', 'toggle-button');
      this.toggle_button.innerText = "Toggle Style";
      this.toggle_button.onclick = this.style_manager.toggle_style;
      this.elt.appendChild(this.toggle_button);
      columns = [
        {
          key: 'rank',
          sort_order: 'none',
          heading_text: '#',
          classes: ['rank']
        },
        {
          key: this.parent.main_column.key,
          sort_order: 'ascending',
          heading_text: this.parent.main_column.name,
          classes: ['country',
        'main-column']
        },
        {
          key: 'population',
          sort_order: 'descending',
          heading_text: 'Population',
          classes: ['population']
        },
        {
          key: 'cases',
          sort_order: 'descending',
          heading_text: 'Cases',
          classes: ['cases']
        },
        {
          key: 'cases_per_million',
          sort_order: 'descending',
          heading_text: 'Cases / Million',
          classes: ['cases-per-million']
        },
        {
          key: 'deaths',
          sort_order: 'descending',
          heading_text: 'Deaths',
          classes: ['deaths']
        },
        {
          key: 'deaths_per_million',
          sort_order: 'descending',
          heading_text: 'Deaths / Million',
          classes: ['deaths-per-million']
        },
        {
          key: 'deaths_per_cent',
          sort_order: 'descending',
          heading_text: 'Deaths %',
          classes: ['deaths-per-cent']
        }
      ];
      this.table = new Sortable_Table(this.parent.data, columns);
      this.elt.appendChild(this.table.elt);
    }

  };

  if (typeof window !== "undefined" && window !== null) {
    window.Covid_19_Data = Covid_19_Data;
  } else {
    exports.Covid_19_Data = Covid_19_Data;
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY292aWRfMTlfZGF0YS5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsic3JjL2NvdmlkXzE5X2RhdGEuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQztFQUFBOztBQUFBLE1BQUEsYUFBQSxFQUFBLGtCQUFBLEVBQUEsYUFBQSxFQUFBLGtCQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxXQUFBLEVBQUEsZUFBQSxFQUFBOztFQUVELElBQUcsZ0RBQUg7SUFDRSxLQUFBLEdBQVEsTUFBTSxDQUFDLE1BRGpCO0dBQUEsTUFBQTtJQUlFLEtBQUEsR0FBUSxPQUFBLENBQVEsWUFBUjtJQUNSLEdBQUEsR0FBTSxPQUFBLENBQVEsV0FBUjtJQUNOLGVBQUEsR0FBa0IsT0FBQSxDQUFRLHVCQUFSO0lBQ2xCLGtCQUFBLEdBQXFCLE9BQUEsQ0FBUSxzQkFBUjtJQUNyQixjQUFBLEdBQWlCLE9BQUEsQ0FBUSxnQkFBUixFQVJuQjs7O0VBV0EsV0FBQSxHQUFjLFFBQUEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBO0lBQ1osSUFBRyxDQUFBLEtBQUssQ0FBUjtBQUNFLGFBQU8sTUFBQSxDQUFPLENBQUMsT0FBQSxHQUFVLENBQVYsR0FBYyxDQUFmLENBQWlCLENBQUMsT0FBbEIsQ0FBQSxDQUFQLEVBRFQ7O0VBRFk7O0VBS1IsZ0JBQU4sTUFBQSxjQUFBO0lBRUUsV0FBYSxDQUFBLENBQUE7VUFNYixDQUFBLGdCQUFBLENBQUE7VUFLQSxDQUFBLG1CQUFBLENBQUE7TUFWRSxJQUFDLENBQUEsYUFBRCxHQUFpQjtNQUNqQixJQUFDLENBQUEsTUFBRCxHQUNFO1FBQUEsS0FBQSxFQUFPLFFBQVEsQ0FBQyxjQUFULENBQXdCLGFBQXhCLENBQVA7UUFDQSxJQUFBLEVBQU0sUUFBUSxDQUFDLGNBQVQsQ0FBd0IsWUFBeEI7TUFETjtJQUhTOztJQU1iLFNBQVcsQ0FBQyxJQUFELENBQUE7QUFDYixVQUFBO01BQUksS0FBQSxHQUFRLElBQUMs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QSxFQUFTLENBQUMsaUJBQUQ7UUFKWCxDQTNDUTs7TUFtRFYsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLGNBQUosQ0FBbUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxJQUEzQixFQUFpQyxPQUFqQztNQUNULElBQUMsQ0FBQSxHQUFHLENBQUMsV0FBTCxDQUFpQixJQUFDLENBQUEsS0FBSyxDQUFDLEdBQXhCO0lBMUVXOztFQUZmOztFQStFQSxJQUFHLGdEQUFIO0lBQ0UsTUFBTSxDQUFDLGFBQVAsR0FBdUIsY0FEekI7R0FBQSxNQUFBO0lBSUUsT0FBTyxDQUFDLGFBQVIsR0FBd0IsY0FKMUI7O0FBbEtDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgY29mZmVlXG4jXG5cbmlmIHdpbmRvdz9cbiAgZmV0Y2ggPSB3aW5kb3cuZmV0Y2hcblxuZWxzZVxuICBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKVxuICBjc3YgPSByZXF1aXJlKCdjc3Z0b2pzb24nKVxuICBwb3B1bGF0aW9uX2RhdGEgPSByZXF1aXJlKCcuL2pzL3BvcHVsYXRpb25zLmpzb24nKVxuICBjc3NlX2NvdmlkXzE5X2RhdGEgPSByZXF1aXJlKCcuL2Nzc2VfY292aWRfMTlfZGF0YScpXG4gIHNvcnRhYmxlX3RhYmxlID0gcmVxdWlyZSgnc29ydGFibGVfdGFibGUnKVxuXG5cbnBlcl9taWxsaW9uID0gKHgseSkgLT5cbiAgaWYgeSAhPSAwXG4gICAgcmV0dXJuIE51bWJlcigoMTAwMDAwMCAqIHggLyB5KS50b0ZpeGVkKCkpXG5cblxuY2xhc3MgU3R5bGVfTWFuYWdlclxuXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIEBjdXJyZW50X3N0eWxlID0gJ2RhcmsnXG4gICAgQHN0eWxlcyA9XG4gICAgICBsaWdodDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0LXN0eWxlJylcbiAgICAgIGRhcms6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrLXN0eWxlJylcblxuICBzZXRfc3R5bGU6IChuYW1lKSA9PlxuICAgIHN0eWxlID0gQHN0eWxlc1tuYW1lXVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpXG4gICAgQGN1cnJlbnRfc3R5bGUgPSBuYW1lXG5cbiAgdG9nZ2xlX3N0eWxlOiA9PlxuICAgIG5hbWUgPSB7IGxpZ2h0OiAnZGFyaycsIGRhcms6ICdsaWdodCcgfVtAY3VycmVudF9zdHlsZV1cbiAgICBAc2V0X3N0eWxlKG5hbWUpXG5cblxuY2xhc3MgQ292aWRfMTlfRGF0YVxuXG4gIGNvbnN0cnVjdG9yOiAoc3BlYykgLT5cbiAgICBAaWQgPSBzcGVjLmlkXG4gICAgQGRhdGUgPSBzcGVjLmRhdGVcbiAgICBAbWFpbl9jb2x1bW4gPSBzcGVjLm1haW5fY29sdW1uXG4gICAgQGNvdmlkXzE5X2RhdGEgPSBzcGVjLmNvdmlkXzE5X2RhdGFcbiAgICBAcG9wdWxhdGlvbl9kYXRhID0gc3BlYy5wb3B1bGF0aW9uX2RhdGFcblxuICAgIEBkYXRhID0gQG1lcmdlX2RhdGEoKVxuICAgIEB2aWV3cyA9IFtdXG5cbiAgIyBjYWxsIGFmdGVyIGRvY3VtZW50IGxvYWRlZFxuICBpbml0OiA9PlxuICAgIEBhZGRfdmlldyhAZGF0YSlcblxuICBtZXJnZV9kYXRhOiA9PlxuICAgIGRhdGEgPSBbXVxuICAgIHJhbmsgPSAxXG4gICAgZm9yIG5hbWUsIG9iaiBvZiBAY292aWRfMTlfZGF0YVxuICAgICAgcG9wdWxhdGlvbiA9IEBwb3B1bGF0aW9uX2RhdGFbbmFtZV1cbiAgICAgIGlmIHBvcHVsYXRpb24gJiYgcG9wdWxhdGlvbiA+IDEwMDAwMDBcbiAgICAgICAgY2FzZXMgPSBvYmouY2FzZXNcbiAgICAgICAgY2FzZXNfcGVyX21pbGxpb24gPSBwZXJfbWlsbGlvbihjYXNlcyxwb3B1bGF0aW9uKVxuICAgICAgICBkZWF0aHMgPSBvYmouZGVhdGhzXG4gICAgICAgIGRlYXRoc19wZXJfbWlsbGlvbiA9IHBlcl9taWxsaW9uKGRlYXRocyxwb3B1bGF0aW9uKVxuICAgICAgICBkZWF0aHNfcGVyX2NlbnQgPSAoMTAwKmRlYXRocy9jYXNlcykudG9GaXhlZCgpXG4gICAgICAgIHJvdyA9IHtcbiAgICAgICAgICByYW5rOiByYW5rKytcbiAgICAgICAgICBwb3B1bGF0aW9uOiBwb3B1bGF0aW9uXG4gICAgICAgICAgY2FzZXM6IGNhc2VzXG4gICAgICAgICAgY2FzZXNfcGVyX21pbGxpb246IGNhc2VzX3Blcl9taWxsaW9uXG4gICAgICAgICAgZGVhdGhzOiBkZWF0aHNcbiAgICAgICAgICBkZWF0aHNfcGVyX21pbGxpb246IGRlYXRoc19wZXJfbWlsbGlvbiBcbiAgICAgICAgICBkZWF0aHNfcGVyX2NlbnQ6IGRlYXRoc19wZXJfY2VudFxuICAgICAgICB9XG4gICAgICAgIHJvd1tAbWFpbl9jb2x1bW4ua2V5XSA9IG5hbWVcbiAgICAgICAgZGF0YS5wdXNoKHJvdylcbiAgICByZXR1cm4gZGF0YVxuICAgIFxuICBhZGRfdmlldzogKHBhcmVudF9lbHQpID0+XG4gICAgdmlld19pZCA9IFwidmlld18je0B2aWV3cy5sZW5ndGh9XCJcbiAgICB2aWV3ID0gbmV3IENvdmlkXzE5X0RhdGFfVmlldyh0aGlzLCB2aWV3X2lkKVxuICAgIHBhcmVudF9lbHQuYXBwZW5kQ2hpbGQodmlldy5lbHQpXG4gICAgQHZpZXdzLnB1c2godmlldylcblxuXG5jbGFzcyBDb3ZpZF8xOV9EYXRhX1ZpZXdcblxuICBjb25zdHJ1Y3RvcjogKEBwYXJlbnQsIEBpZCkgLT5cbiAgICBAZWx0X2lkID0gXCIje0BpZH0taWV3XyN7fVwiXG4gICAgQGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgQGVsdC5zZXRBdHRyaWJ1dGUoJ2lkJywgQGVsdF9pZClcbiAgICBAZWx0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY292aWQtMTktZGF0YS12aWV3JylcblxuICAgIEBzdHlsZV9tYW5hZ2VyID0gbmV3IFN0eWxlX01hbmFnZXIoKVxuXG4gICAgQGgxX2VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJylcbiAgICBAaDFfZWx0LmlubmVyVGV4dCA9IFwiQ292aWRfMTlfRGF0YV9WaWV3IC0gI3tAcGFyZW50Lm1haW5fY29sdW1uLm5hbWV9XCJcbiAgICBAZWx0LmFwcGVuZENoaWxkKEBoMV9lbHQpXG4gICAgXG4gICAgQGRhdGVfZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgQGRhdGVfZWx0LmlubmVyVGV4dCA9IFwiI3tAcGFyZW50LmRhdGV9XCJcbiAgICBAZWx0LmFwcGVuZENoaWxkKEBkYXRlX2VsdClcblxuICAgIEB0b2dnbGVfYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBAdG9nZ2xlX2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvZ2dsZS1idXR0b24nKVxuICAgIEB0b2dnbGVfYnV0dG9uLmlubmVyVGV4dCA9IFwiVG9nZ2xlIFN0eWxlXCJcbiAgICBAdG9nZ2xlX2J1dHRvbi5vbmNsaWNrID0gQHN0eWxlX21hbmFnZXIudG9nZ2xlX3N0eWxlXG4gICAgQGVsdC5hcHBlbmRDaGlsZChAdG9nZ2xlX2J1dHRvbilcblxuICAgIGNvbHVtbnMgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ3JhbmsnXG4gICAgICAgIHNvcnRfb3JkZXI6ICdub25lJ1xuICAgICAgICBoZWFkaW5nX3RleHQ6ICcjJ1xuICAgICAgICBjbGFzc2VzOiBbJ3JhbmsnXVxuICAgICAgICB9XG4gICAgICB7XG4gICAgICAgIGtleTogQHBhcmVudC5tYWluX2NvbHVtbi5rZXlcbiAgICAgICAgc29ydF9vcmRlcjogJ2FzY2VuZGluZydcbiAgICAgICAgaGVhZGluZ190ZXh0OiBAcGFyZW50Lm1haW5fY29sdW1uLm5hbWVcbiAgICAgICAgY2xhc3NlczogWydjb3VudHJ5JywgJ21haW4tY29sdW1uJ11cbiAgICAgICAgfVxuICAgICAge1xuICAgICAgICBrZXk6ICdwb3B1bGF0aW9uJ1xuICAgICAgICBzb3J0X29yZGVyOiAnZGVzY2VuZGluZydcbiAgICAgICAgaGVhZGluZ190ZXh0OiAnUG9wdWxhdGlvbidcbiAgICAgICAgY2xhc3NlczogWydwb3B1bGF0aW9uJ11cbiAgICAgICAgfVxuICAgICAge1xuICAgICAgICBrZXk6ICdjYXNlcydcbiAgICAgICAgc29ydF9vcmRlcjogJ2Rlc2NlbmRpbmcnXG4gICAgICAgIGhlYWRpbmdfdGV4dDogJ0Nhc2VzJ1xuICAgICAgICBjbGFzc2VzOiBbJ2Nhc2VzJ11cbiAgICAgICAgfVxuICAgICAge1xuICAgICAgICBrZXk6ICdjYXNlc19wZXJfbWlsbGlvbidcbiAgICAgICAgc29ydF9vcmRlcjogJ2Rlc2NlbmRpbmcnXG4gICAgICAgIGhlYWRpbmdfdGV4dDogJ0Nhc2VzIC8gTWlsbGlvbidcbiAgICAgICAgY2xhc3NlczogWydjYXNlcy1wZXItbWlsbGlvbiddXG4gICAgICAgIH1cbiAgICAgIHtcbiAgICAgICAga2V5OiAnZGVhdGhzJ1xuICAgICAgICBzb3J0X29yZGVyOiAnZGVzY2VuZGluZydcbiAgICAgICAgaGVhZGluZ190ZXh0OiAnRGVhdGhzJ1xuICAgICAgICBjbGFzc2VzOiBbJ2RlYXRocyddXG4gICAgICAgIH1cbiAgICAgIHtcbiAgICAgICAga2V5OiAnZGVhdGhzX3Blcl9taWxsaW9uJ1xuICAgICAgICBzb3J0X29yZGVyOiAnZGVzY2VuZGluZydcbiAgICAgICAgaGVhZGluZ190ZXh0OiAnRGVhdGhzIC8gTWlsbGlvbidcbiAgICAgICAgY2xhc3NlczogWydkZWF0aHMtcGVyLW1pbGxpb24nXVxuICAgICAgICB9XG4gICAgICB7XG4gICAgICAgIGtleTogJ2RlYXRoc19wZXJfY2VudCdcbiAgICAgICAgc29ydF9vcmRlcjogJ2Rlc2NlbmRpbmcnXG4gICAgICAgIGhlYWRpbmdfdGV4dDogJ0RlYXRocyAlJ1xuICAgICAgICBjbGFzc2VzOiBbJ2RlYXRocy1wZXItY2VudCddXG4gICAgICAgIH1cbiAgICBdXG5cbiAgICBAdGFibGUgPSBuZXcgU29ydGFibGVfVGFibGUoQHBhcmVudC5kYXRhLCBjb2x1bW5zKVxuICAgIEBlbHQuYXBwZW5kQ2hpbGQoQHRhYmxlLmVsdClcblxuXG5pZiB3aW5kb3c/XG4gIHdpbmRvdy5Db3ZpZF8xOV9EYXRhID0gQ292aWRfMTlfRGF0YVxuXG5lbHNlXG4gIGV4cG9ydHMuQ292aWRfMTlfRGF0YSA9IENvdmlkXzE5X0RhdGFcblxuXG4iXX0=
//# sourceURL=/usr/local/server/git/clones/covid_19_data/src/covid_19_data.coffee