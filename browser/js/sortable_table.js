// Generated by CoffeeScript 2.5.1
(function() {
  //!/usr/bin/env coffee

  var Sortable_Table, Sortable_Table_Body, Sortable_Table_Header, deep, normal_sort;

  if (typeof window !== "undefined" && window !== null) {
    deep = window.deep;
  } else {
    deep = require('deep');
  }

  normal_sort = function(spec) {
    var column, direction;
    ({column, direction} = spec);
    return function(a, b) {
      if (direction === 'ascending') {
        [a, b] = [b, a];
      }
      if (a[column] < b[column]) {
        return 1;
      }
      if (a[column] > b[column]) {
        return -1;
      }
      return 0;
    };
  };

  Sortable_Table = class Sortable_Table {
    constructor(data, columns) {
      var column, i, len, ref;
      this.sort_data = this.sort_data.bind(this);
      // creates and installs new table element
      this.update = this.update.bind(this);
      this.highlight = this.highlight.bind(this);
      this.add_column = this.add_column.bind(this);
      this.handle_click = this.handle_click.bind(this);
      this.columns = columns;
      this.data = deep.copy(data);
      this.elt = document.createElement('table');
      this.elt.setAttribute('id', this.id);
      this.elt.setAttribute('class', 'sortable-table');
      this.thead = new Sortable_Table_Header(this);
      this.tbody = new Sortable_Table_Body(this);
      this.elt.appendChild(this.thead.elt);
      this.elt.appendChild(this.tbody.elt);
      this.defaults = {};
      ref = this.columns;
      for (i = 0, len = ref.length; i < len; i++) {
        column = ref[i];
        this.defaults[column.key] = column.sort_order;
      }
      this.current_sort = {
        column: null,
        direction: null
      };
    }

    async sort_data(spec) {
      var data, i, len, rank, row;
      console.log(`sort_data(${spec})`);
      data = (await this.data);
      data.sort(normal_sort(spec));
      rank = 1;
      for (i = 0, len = data.length; i < len; i++) {
        row = data[i];
        row.rank = rank++;
      }
      this.current_sort = spec;
      return this.update();
    }

    update() {
      var tbody;
      // create new <tbody> element from current data
      tbody = new Sortable_Table_Body(this);
      this.tbody.elt.replaceWith(tbody.elt);
      this.tbody = tbody;
      return this.highlight(this.current_sort.column);
    }

    highlight(key) {
      var className, i, j, len, len1, ref, ref1, results, td, th;
      className = key.replace(/_/g, '-');
      ref = this.thead.elt.getElementsByClassName('column-heading');
      for (i = 0, len = ref.length; i < len; i++) {
        th = ref[i];
        th.classList.remove('highlight');
      }
      ref1 = this.tbody.elt.getElementsByClassName(className);
      results = [];
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        td = ref1[j];
        results.push(td.classList.add('highlight'));
      }
      return results;
    }

    add_column(key, spec) {
      spec.key = key;
      return this.columns[key] = spec;
    }

    handle_click(column) {
      var defalt_order, direction;
      defalt_order = this.defaults[column].sort_order;
      if (defalt_order !== 'none') {
        if (this.current_sort.column === column) {
          if (this.current_sort.direction === 'ascending') {
            direction = 'descending';
          } else {
            direction = 'ascending';
          }
        } else {
          direction = defalt_order;
        }
        return this.sort_data({column, direction});
      }
    }

  };

  Sortable_Table_Header = class Sortable_Table_Header {
    constructor(table) {
      var classes, column, i, len, ref, th;
      this.handle_click = this.handle_click.bind(this);
      this.table = table;
      this.elt = document.createElement('thead');
      this.elt.setAttribute('class', 'sortable-table-header');
      this.tr = document.createElement('tr');
      this.elt.setAttribute('id', 'table-header');
      ref = this.table.columns;
      for (i = 0, len = ref.length; i < len; i++) {
        column = ref[i];
        th = document.createElement('th');
        classes = column.classes.concat(['column-heading']);
        th.setAttribute('class', classes.join(' '));
        th.innerText = column.heading_text;
        th.onclick = this.handle_click(column.key);
        if (column.key !== 'rank') {
          th.onmouseover = this.handle_mouseover(th);
          th.onmouseout = this.handle_mouseout(th);
        }
        this.tr.appendChild(th);
      }
      this.elt.appendChild(this.tr);
    }

    handle_mouseover(th) {
      return function() {
        return th.classList.add('mouseover');
      };
    }

    handle_mouseout(th) {
      return function() {
        return th.classList.remove('mouseover');
      };
    }

    handle_click(key) {
      return () => {
        return this.table.handle_click(key);
      };
    }

  };

  Sortable_Table_Body = class Sortable_Table_Body {
    constructor(table) {
      var classes, i, j, len, len1, obj, ref, ref1, spec, td, tr;
      this.table = table;
      this.elt = document.createElement('tbody');
      this.elt.setAttribute('class', 'sortable-table-body');
      ref = this.table.data;
      for (i = 0, len = ref.length; i < len; i++) {
        obj = ref[i];
        tr = document.createElement('tr');
        tr.setAttribute('class', 'sortable-table-row');
        ref1 = this.table.columns;
        for (j = 0, len1 = ref1.length; j < len1; j++) {
          spec = ref1[j];
          td = document.createElement('td');
          classes = spec.classes.concat(['column-data']);
          td.setAttribute('class', spec.classes.join(' '));
          td.innerText = obj[spec.key];
          tr.appendChild(td);
        }
        this.elt.appendChild(tr);
      }
    }

  };

  if (typeof window !== "undefined" && window !== null) {
    window.Sortable_Table = Sortable_Table;
  } else {
    exports.Sortable_Table = Sortable_Table;
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydGFibGVfdGFibGUuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbInNyYy9zb3J0YWJsZV90YWJsZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNDO0VBQUE7O0FBQUEsTUFBQSxjQUFBLEVBQUEsbUJBQUEsRUFBQSxxQkFBQSxFQUFBLElBQUEsRUFBQTs7RUFHRCxJQUFHLGdEQUFIO0lBQ0UsSUFBQSxHQUFPLE1BQU0sQ0FBQyxLQURoQjtHQUFBLE1BQUE7SUFJRSxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVIsRUFKVDs7O0VBTUEsV0FBQSxHQUFjLFFBQUEsQ0FBQyxJQUFELENBQUE7QUFDZCxRQUFBLE1BQUEsRUFBQTtJQUFFLENBQUEsQ0FBQyxNQUFELEVBQVMsU0FBVCxDQUFBLEdBQXNCLElBQXRCO1dBQ0EsUUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILENBQUE7TUFDRSxJQUFpQixTQUFBLEtBQWEsV0FBOUI7UUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILENBQUEsR0FBUSxDQUFDLENBQUQsRUFBRyxDQUFILEVBQVI7O01BQ0EsSUFBWSxDQUFDLENBQUMsTUFBRCxDQUFELEdBQVksQ0FBQyxDQUFDLE1BQUQsQ0FBekI7QUFBQSxlQUFPLEVBQVA7O01BQ0EsSUFBYSxDQUFDLENBQUMsTUFBRCxDQUFELEdBQVksQ0FBQyxDQUFDLE1BQUQsQ0FBMUI7QUFBQSxlQUFPLENBQUMsRUFBUjs7QUFDQSxhQUFPO0lBSlQ7RUFGWTs7RUFTUixpQkFBTixNQUFBLGVBQUE7SUFFRSxXQUFhLENBQUMsSUFBRCxTQUFBLENBQUE7QUFDZixVQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO1VBZUUsQ0FBQSxnQkFBQSxDQUFBLHFCQWZGOztVQTBCRSxDQUFBLGFBQUEsQ0FBQTtVQU9BLENBQUEsZ0JBQUEsQ0FBQTtVQU9BLENBQUEsaUJBQUEsQ0FBQTtVQUlBLENBQUEsbUJBQUEsQ0FBQTtNQTdDb0IsSUFBQyxDQUFBO01BQ25C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RUFBeUIsb0JBQXpCO0FBQ0E7UUFBQSxLQUFBLHdDQUFBOztVQUNFLEVBQUEsR0FBSyxRQUFRLENBQUMsYUFBVCxDQUF1QixJQUF2QjtVQUNMLE9BQUEsR0FBVSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQWIsQ0FBb0IsQ0FBQyxhQUFELENBQXBCO1VBQ1YsRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsT0FBaEIsRUFBeUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFiLENBQWtCLEdBQWxCLENBQXpCO1VBQ0EsRUFBRSxDQUFDLFNBQUgsR0FBZSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQU47VUFDbEIsRUFBRSxDQUFDLFdBQUgsQ0FBZSxFQUFmO1FBTEY7UUFNQSxJQUFDLENBQUEsR0FBRyxDQUFDLFdBQUwsQ0FBaUIsRUFBakI7TUFURjtJQUhXOztFQUZmOztFQWlCQSxJQUFHLGdEQUFIO0lBQ0UsTUFBTSxDQUFDLGNBQVAsR0FBd0IsZUFEMUI7R0FBQSxNQUFBO0lBSUUsT0FBTyxDQUFDLGNBQVIsR0FBeUIsZUFKM0I7O0FBMUhDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgY29mZmVlXG4jXG5cblxuaWYgd2luZG93P1xuICBkZWVwID0gd2luZG93LmRlZXBcblxuZWxzZVxuICBkZWVwID0gcmVxdWlyZSgnZGVlcCcpXG5cbm5vcm1hbF9zb3J0ID0gKHNwZWMpIC0+XG4gIHtjb2x1bW4sIGRpcmVjdGlvbn0gPSBzcGVjXG4gIChhLGIpIC0+XG4gICAgW2EsYl0gPSBbYixhXSBpZiBkaXJlY3Rpb24gPT0gJ2FzY2VuZGluZydcbiAgICByZXR1cm4gMSBpZiBhW2NvbHVtbl0gPCBiW2NvbHVtbl1cbiAgICByZXR1cm4gLTEgaWYgYVtjb2x1bW5dID4gYltjb2x1bW5dIFxuICAgIHJldHVybiAwIFxuXG5cbmNsYXNzIFNvcnRhYmxlX1RhYmxlXG5cbiAgY29uc3RydWN0b3I6IChkYXRhLCBAY29sdW1ucykgLT5cbiAgICBAZGF0YSA9IGRlZXAuY29weShkYXRhKVxuICAgIEBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpXG4gICAgQGVsdC5zZXRBdHRyaWJ1dGUoJ2lkJywgQGlkKVxuICAgIEBlbHQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzb3J0YWJsZS10YWJsZScpXG4gICAgQHRoZWFkID0gbmV3IFNvcnRhYmxlX1RhYmxlX0hlYWRlcih0aGlzKVxuICAgIEB0Ym9keSA9IG5ldyBTb3J0YWJsZV9UYWJsZV9Cb2R5KHRoaXMpXG4gICAgQGVsdC5hcHBlbmRDaGlsZChAdGhlYWQuZWx0KVxuICAgIEBlbHQuYXBwZW5kQ2hpbGQoQHRib2R5LmVsdClcbiAgICBAZGVmYXVsdHMgPSB7fVxuICAgIGZvciBjb2x1bW4gaW4gQGNvbHVtbnNcbiAgICAgIEBkZWZhdWx0c1tjb2x1bW4ua2V5XSA9IGNvbHVtbi5zb3J0X29yZGVyXG4gICAgQGN1cnJlbnRfc29ydCA9XG4gICAgICBjb2x1bW46IG51bGxcbiAgICAgIGRpcmVjdGlvbjogbnVsbFxuXG4gIHNvcnRfZGF0YTogKHNwZWMpID0+XG4gICAgY29uc29sZS5sb2coXCJzb3J0X2RhdGEoI3tzcGVjfSlcIilcbiAgICBkYXRhID0gYXdhaXQgQGRhdGFcbiAgICBkYXRhLnNvcnQobm9ybWFsX3NvcnQoc3BlYykpXG4gICAgcmFuayA9IDFcbiAgICBmb3Igcm93IGluIGRhdGFcbiAgICAgIHJvdy5yYW5rID0gcmFuaysrXG4gICAgQGN1cnJlbnRfc29ydCA9IHNwZWNcbiAgICBAdXBkYXRlKClcblxuICAjIGNyZWF0ZXMgYW5kIGluc3RhbGxzIG5ldyB0YWJsZSBlbGVtZW50XG4gIHVwZGF0ZTogPT5cbiAgICAjIGNyZWF0ZSBuZXcgPHRib2R5PiBlbGVtZW50IGZyb20gY3VycmVudCBkYXRhXG4gICAgdGJvZHkgPSBuZXcgU29ydGFibGVfVGFibGVfQm9keSh0aGlzKVxuICAgIEB0Ym9keS5lbHQucmVwbGFjZVdpdGgodGJvZHkuZWx0KVxuICAgIEB0Ym9keSA9IHRib2R5XG4gICAgQGhpZ2hsaWdodChAY3VycmVudF9zb3J0LmNvbHVtbilcblxuICBoaWdobGlnaHQ6IChrZXkpID0+XG4gICAgY2xhc3NOYW1lID0ga2V5LnJlcGxhY2UoL18vZywgJy0nKVxuICAgIGZvciB0aCBpbiBAdGhlYWQuZWx0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbHVtbi1oZWFkaW5nJylcbiAgICAgIHRoLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpXG4gICAgZm9yIHRkIGluIEB0Ym9keS5lbHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpXG4gICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKVxuXG4gIGFkZF9jb2x1bW46IChrZXksIHNwZWMpID0+XG4gICAgc3BlYy5rZXkgPSBrZXlcbiAgICBAY29sdW1uc1trZXldID0gc3BlY1xuXG4gIGhhbmRsZV9jbGljazogKGNvbHVtbikgPT5cbiAgICBkZWZhbHRfb3JkZXIgPSBAZGVmYXVsdHNbY29sdW1uXS5zb3J0X29yZGVyXG4gICAgaWYgZGVmYWx0X29yZGVyICE9ICdub25lJ1xuICAgICAgaWYgQGN1cnJlbnRfc29ydC5jb2x1bW4gPT0gY29sdW1uXG4gICAgICAgIGlmIEBjdXJyZW50X3NvcnQuZGlyZWN0aW9uID09ICdhc2NlbmRpbmcnXG4gICAgICAgICAgZGlyZWN0aW9uID0gJ2Rlc2NlbmRpbmcnXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBkaXJlY3Rpb24gPSAnYXNjZW5kaW5nJ1xuICAgICAgZWxzZVxuICAgICAgICBkaXJlY3Rpb24gPSBkZWZhbHRfb3JkZXJcbiAgICAgIEBzb3J0X2RhdGEoe2NvbHVtbiwgZGlyZWN0aW9ufSlcblxuY2xhc3MgU29ydGFibGVfVGFibGVfSGVhZGVyXG5cbiAgY29uc3RydWN0b3I6IChAdGFibGUpIC0+XG4gICAgQGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJylcbiAgICBAZWx0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc29ydGFibGUtdGFibGUtaGVhZGVyJylcbiAgICBAdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpXG4gICAgQGVsdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RhYmxlLWhlYWRlcicpXG4gICAgZm9yIGNvbHVtbiBpbiBAdGFibGUuY29sdW1uc1xuICAgICAgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpXG4gICAgICBjbGFzc2VzID0gY29sdW1uLmNsYXNzZXMuY29uY2F0KFsnY29sdW1uLWhlYWRpbmcnXSlcbiAgICAgIHRoLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc2VzLmpvaW4oJyAnKSlcbiAgICAgIHRoLmlubmVyVGV4dCA9IGNvbHVtbi5oZWFkaW5nX3RleHRcbiAgICAgIHRoLm9uY2xpY2sgPSBAaGFuZGxlX2NsaWNrKGNvbHVtbi5rZXkpXG4gICAgICBpZiBjb2x1bW4ua2V5ICE9ICdyYW5rJ1xuICAgICAgICB0aC5vbm1vdXNlb3ZlciA9IEBoYW5kbGVfbW91c2VvdmVyKHRoKVxuICAgICAgICB0aC5vbm1vdXNlb3V0ID0gQGhhbmRsZV9tb3VzZW91dCh0aClcbiAgICAgIEB0ci5hcHBlbmRDaGlsZCh0aClcbiAgICBAZWx0LmFwcGVuZENoaWxkKEB0cilcblxuICBoYW5kbGVfbW91c2VvdmVyOiAodGgpIC0+XG4gICAgLT4gdGguY2xhc3NMaXN0LmFkZCgnbW91c2VvdmVyJylcbiAgICAgIFxuICBoYW5kbGVfbW91c2VvdXQ6ICh0aCkgLT5cbiAgICAtPiB0aC5jbGFzc0xpc3QucmVtb3ZlKCdtb3VzZW92ZXInKVxuICAgICAgXG4gIGhhbmRsZV9jbGljazogKGtleSkgPT5cbiAgICA9PiBAdGFibGUuaGFuZGxlX2NsaWNrKGtleSlcblxuY2xhc3MgU29ydGFibGVfVGFibGVfQm9keVxuXG4gIGNvbnN0cnVjdG9yOiAoQHRhYmxlKSAtPlxuICAgIEBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpXG4gICAgQGVsdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NvcnRhYmxlLXRhYmxlLWJvZHknKVxuICAgIGZvciBvYmogaW4gQHRhYmxlLmRhdGFcbiAgICAgIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKVxuICAgICAgdHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzb3J0YWJsZS10YWJsZS1yb3cnKVxuICAgICAgZm9yIHNwZWMgaW4gQHRhYmxlLmNvbHVtbnNcbiAgICAgICAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpXG4gICAgICAgIGNsYXNzZXMgPSBzcGVjLmNsYXNzZXMuY29uY2F0KFsnY29sdW1uLWRhdGEnXSlcbiAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHNwZWMuY2xhc3Nlcy5qb2luKCcgJykpXG4gICAgICAgIHRkLmlubmVyVGV4dCA9IG9ialtzcGVjLmtleV1cbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpXG4gICAgICBAZWx0LmFwcGVuZENoaWxkKHRyKVxuXG5cbmlmIHdpbmRvdz9cbiAgd2luZG93LlNvcnRhYmxlX1RhYmxlID0gU29ydGFibGVfVGFibGVcblxuZWxzZVxuICBleHBvcnRzLlNvcnRhYmxlX1RhYmxlID0gU29ydGFibGVfVGFibGVcbiAgXG4iXX0=
//# sourceURL=/usr/local/server/git/clones/sortable_table/src/sortable_table.coffee